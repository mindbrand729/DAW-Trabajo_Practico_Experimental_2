{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/form.css' %}">
<link rel="stylesheet" href="{% static 'css/buttonD.css' %}">
<link rel="stylesheet" href="{% static 'css/flower.css' %}">
<link rel="stylesheet" href="{% static 'css/image.css' %}">
{% endblock %}
{% block title %}Página Productos | Floristería{% endblock %}

{% block content %}
<h1>{% if product.pk %}Modificar{% else %}Ingresar{% endif %} Datos del Producto</h1>
<div class='container-button'>
    <button type="button" class="button-delete" onclick="location.href='{% url 'products_list' %}'">
        <span class="button__text">Volver</span>
        <span class="button__icon"><i class="fa-solid fa-rotate-left"></i></span>
    </button>
    {% if product.pk %}
        <button type="button" class="button-delete" onclick="location.href='{% url 'product_delete' product.pk %}'">
            <span class="button__text">Eliminar</span>
            <span class="button__icon"><i class="fa-solid fa-trash"></i></span>
        </button>
    {% endif %}
</div>
<div class="form-container">
    <form class="image-upload-form" method="post" enctype="multipart/form-data" data-is-edit="{% if product.pk %}true{% else %}false{% endif %}">
        {% csrf_token %}
        <div class="form-wrapper">
            <div class="form-column">
                <div class="form-group">
                    <label for="name">Nombre del Producto:</label>
                    <input type="text" id="name" name="name_products" pattern="^(?!\d+$).{3,100}$" maxlength="100" minlength="3" value="{{ product.name_products }}" placeholder="..." required="">
                    {{ form.name_products.errors }}
                </div>
                <div class="form-group">
                    <label for="price">Precio del Producto:</label>
                    <input type="number" id="price" name="price_products" value="{{ product.price_products }}" min="0" step="0.01" placeholder="..." required="">
                    {{ form.price_products.errors }}
                </div>
                <div class="form-group">
                    <label for="iva">Iva del Producto:</label>
                    <select id="iva_products" name="iva_products" placeholder="..." required="">
                        <option value="">Seleccione...</option>
                        <option value="15" {% if product.iva_products == 15 %}selected{% endif %}>15%</option>
                        <option value="0" {% if product.iva_products == 0 %}selected{% endif %}>0%</option>
                    </select>
                    {{ form.iva_products.errors }}
                </div>
            </div>
            <div class="form-column">
                <div class="form-group">
                    <label for="textarea">Descripción</label>
                    <textarea name="description_products" id="description_products" rows="10" cols="50" pattern="^(?!\d+$).{10,500}$" placeholder="..." required="">{{ product.description_products }}</textarea>
                    {{ form.description_products.errors }}
                </div>
                <div class="form-group">
                    <label for="file">Imagen</label>
                    <div class="actions">
                        <label for="file" class="upload">
                            Elegir archivo
                            <input hidden type="file" id="file" name="imagen_products" accept="image/*" class="file-input">
                            <img class="preview" src="{% if product.pk %}{{ product.imagen_products.url }}{% endif %}" />
                        </label>
                    </div>
                    <div class="error-msg"></div>
                </div>
            </div>
        </div>
        <div class='form-actions'>
            <button class="btn" type="submit" id="guardar-btn">
                <div class="wrapper">
                    <p class="text">Guardar</p>
                    {% include 'button.html' %}
                </div>
            </button>
        </div>
    </form>
</div>
{% block extra_js %}<script src="{% static 'js/form.js' %}"></script>{% endblock %}
{% endblock %}